
<!doctype html>
<html lang="en">
<head>
    <title>Alaska Earthquake Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <!-- PapaParse Library for CSV reading -->
    <script src="https://cdnjs.cloudflare.com"></script>

    <style>
        body { margin:0; padding:0; }
        #mapdiv { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<div id="mapdiv"></div>

<script>
    var mymap = L.map('mapdiv').setView([64.0, -150.0], 5);

    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Map data &copy; OpenStreetMap'
    }).addTo(mymap);

    // Function to load and parse CSV
    function loadCSV() {
        Papa.parse("Alaska Earthquakes to Print.csv", {
            download: true,
            header: true,
            dynamicTyping: true, // Automatically converts strings to numbers
            complete: function(results) {
                results.data.forEach(function(row) {
                    if (row.latitude && row.longitude) {
                        // Create a circle marker based on depth
                        // Radius is in meters; adjust multiplier as needed for visualization
                        L.circle([row.latitude, row.longitude], {
                            radius: row.depth * 500, 
                            color: 'red',
                            fillColor: '#f03',
                            fillOpacity: 0.5
                        })
                        .bindPopup(`<b>Location:</b> ${row.place}<br>
                                    <b>Magnitude:</b> ${row.magnitude}<br>
                                    <b>Depth:</b> ${row.depth} km`)
                        .addTo(mymap);
                    }
                });
            }
        });
    }

    loadCSV();
</script>
</body>
</html>